(function(e){function t(t){for(var r,a,o=t[0],u=t[1],s=t[2],d=0,f=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&f.push(c[a][0]),c[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==c[u]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},c={app:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/cryptonomikon_d/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var l=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2799:function(e,t,n){},"504d":function(e,t,n){"use strict";n("2799")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c=(n("b0c0"),{class:"hero"}),i={class:"hero__container container"},a=Object(r["e"])("h2",{class:"visually-hidden"},"Критповалюта",-1),o={class:"add"},u=Object(r["e"])("p",{class:"add__text"},"Лучше использовать BTC, ETH, DOGE, так как у них чаще обновляется цена",-1),s={class:"add__label"},l=Object(r["d"])(" Тикер "),d={class:"add__complete"},f={class:"hero__currencies currencies"};function p(e,t,n,p,b,m){var k=Object(r["h"])("TickerItem");return Object(r["f"])(),Object(r["c"])("section",c,[Object(r["e"])("div",i,[a,Object(r["e"])("div",o,[u,Object(r["e"])("label",s,[l,Object(r["l"])(Object(r["e"])("input",{class:"add__input",type:"text",placeholder:"Например BTC","onUpdate:modelValue":t[1]||(t[1]=function(e){return b.tickerInput=e}),onInput:t[2]||(t[2]=function(e){return e.target.composing=!1}),onKeydown:t[3]||(t[3]=Object(r["m"])((function(e){return m.addTicker(b.tickerInput)}),["enter"]))},null,544),[[r["j"],b.tickerInput]])]),Object(r["e"])("ul",d,[(Object(r["f"])(!0),Object(r["c"])(r["a"],null,Object(r["g"])(b.tooltips,(function(e){return Object(r["f"])(),Object(r["c"])("li",{key:e.id},[Object(r["e"])("button",{onClick:function(t){return m.addTicker(e.Symbol)},type:"button"},Object(r["i"])(e.Symbol),9,["onClick"])])})),128))]),Object(r["l"])(Object(r["e"])("div",{class:"add__warning"},Object(r["i"])(b.warning),513),[[r["k"],b.warning]]),Object(r["e"])("button",{onClick:t[4]||(t[4]=function(e){return m.addTicker(b.tickerInput)}),type:"button",class:"add__btn"}," Добавить ")]),Object(r["e"])("ul",f,[(Object(r["f"])(!0),Object(r["c"])(r["a"],null,Object(r["g"])(b.tickersCards,(function(e){return Object(r["f"])(),Object(r["c"])("li",{class:"currencies__column",key:e.name},[Object(r["e"])(k,{ticker:e,onDeleteTicker:t[5]||(t[5]=function(e){return m.deleteTicker(e)})},null,8,["ticker"])])})),128))])])])}var b=n("1da1"),m=(n("96cf"),n("d81d"),n("7db0"),n("caad"),n("2532"),n("4de4"),n("159b"),n("fb6a"),n("2909")),k=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("99af"),n("b64b"),n("bc3a")),O=n.n(k);function j(){return h.apply(this,arguments)}function h(){return h=Object(b["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("https://min-api.cryptocompare.com/data/all/coinlist",{params:{summary:"true",api_key:"b928fd627a4b6f67ea5e3744e1f6d79cbc8b44e2c9b36fc7f303434eec3ce372"}});case 2:return t=e.sent,e.next=5,t.data;case 5:return n=e.sent,r=Object.keys(n.Data).map((function(e){return n.Data[e]})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}var g=new WebSocket("wss://streamer.cryptocompare.com/v2?api_key=b928fd627a4b6f67ea5e3744e1f6d79cbc8b44e2c9b36fc7f303434eec3ce372"),v=new Map;function _(e){var t=JSON.stringify(e);g.readyState!==WebSocket.OPEN?g.addEventListener("open",(function(){g.send(t)}),{once:!0}):g.send(t)}function y(e){_({action:"SubAdd",subs:["5~CCCAGG~".concat(e,"~USD")]})}function w(e){_({action:"SubRemove",subs:["5~CCCAGG~".concat(e,"~USD")]})}g.addEventListener("message",(function(e){var t,n=JSON.parse(e.data);if(n.PRICE){var r=null!==(t=v.get(n.FROMSYMBOL))&&void 0!==t?t:[];r.forEach((function(e){return e(n.PRICE)}))}}));var S=function(e,t){var n=v.get(e)||[];v.set(e,[].concat(Object(m["a"])(n),[t])),y(e)},C=function(e,t){v.delete(e),w(e)},T=function(e){g.addEventListener("error",(function(t){e()}))},I={class:"currencies__item"},x={class:"currencies__head"},D={class:"currencies__icon"},L={class:"currencies__name"},E={class:"currencies__value"},P={class:"currencies__buttons currencies-buttons"},R={class:"currencies-buttons__item"};function M(e,t,n,c,i,a){return Object(r["f"])(),Object(r["c"])("div",I,[Object(r["e"])("div",x,[Object(r["e"])("span",D,[Object(r["e"])("img",{src:"https://www.cryptocompare.com/"+n.ticker.img,alt:"Иконка"},null,8,["src"])]),Object(r["e"])("span",L,Object(r["i"])(n.ticker.name),1)]),Object(r["e"])("span",E,Object(r["i"])(n.ticker.price)+" USD",1),Object(r["e"])("ul",P,[Object(r["e"])("li",R,[Object(r["e"])("button",{class:"currencies-buttons__btn",onClick:t[1]||(t[1]=function(t){return e.$emit("deleteTicker",n.ticker.name)})},"Удалить")])])])}var J={props:["ticker"]};J.render=M;var N=J,U={name:"App",components:{TickerItem:N},data:function(){return{tickersData:null,tickerInput:"",tooltips:[],tickersCards:[],warning:!1}},computed:{addedTickers:function(){return this.tickersCards.map((function(e){return e.name}))}},methods:{getTickerImg:function(e){var t=this.tickersData.find((function(t){return t.Symbol===e}));return t.ImageUrl},addTicker:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e=e.toUpperCase();try{t.addedTickers.includes(e)?t.warning="Такой тикет уже добавлен":t.tickersData.find((function(t){return t.Symbol===e}))?(t.warning=!1,r={name:e,price:"-",img:t.getTickerImg(e)},t.tickersCards.push(r),t.updateLocalStorage(),S(e,(function(n){var r=t.tickersCards.find((function(t){return t.name===e}));r.price=n})),t.tickerInput=""):t.warning="Такого тикера нет"}catch(c){t.warning="Ошибка получения данных с сервера"}case 2:case"end":return n.stop()}}),n)})))()},deleteTicker:function(e){this.tickersCards=this.tickersCards.filter((function(t){return t.name!==e})),this.updateLocalStorage(),C(e)},updateLocalStorage:function(){localStorage.setItem("addedTickers",JSON.stringify(this.tickersCards))},getTickersFromLocalStorage:function(){var e;this.tickersCards=null!==(e=JSON.parse(localStorage.getItem("addedTickers")))&&void 0!==e?e:[],this.tickersCards.length&&this.tickersCards.forEach((function(e){S(e.name,(function(t){e.price=t}))}))},viewTooltip:function(){var e=this.tickerInput.toLowerCase();this.tooltips=0!==+e||"0"===e?this.tickersData.filter((function(t){return t.FullName.toLowerCase().includes(e)})).slice(0,4):[]}},watch:{tickerInput:function(){this.viewTooltip()}},mounted:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j();case 2:e.tickersData=t.sent,e.getTickersFromLocalStorage(),T((function(){e.warning="Ошибка соединения с WebSocket"}));case 5:case"end":return t.stop()}}),t)})))()}};n("504d");U.render=p;var G=U;Object(r["b"])(G).mount("#app")}});
//# sourceMappingURL=app.91420214.js.map